<div class="container places-margin-bottom">
  <div class="my-3">
    <div class="row justify-content-center">
      <div id="places">
        <% if @places.none? %>
          <em>Désolé, l'endroit que vous recherchez n'existe pas.</em>
        <% end %>
      </div>
    </div>

    <div>
      <%= form_tag(journey_places_path(@journey), class: "form-search-card", method: :get) do %>
        <%= text_field_tag :keyword, params[:keyword], class: "input-search-card" %>
        <%= hidden_field_tag :weather_icon, params[:weather_icon] %>
        <%= submit_tag "Rechercher", class: "search-button" %>
      <% end %>
    </div>

    <% total_duration_minutes = @journey.places.sum(:visit_duration) %>
    <% if total_duration_minutes > 0 %>
      <p>Le parcours prévoit <%= @journey.places.sum(:visit_duration)/60 %>h <%=@journey.places.sum(:visit_duration) % 60%> mn</p>
    <% end %>
    <% rest_time = @rest_time %>
    <% if rest_time > 0 %>
    <p>Il reste <%= @rest_time / 60 %> h <%= @rest_time % 60 %> mn de temps disponible</p>
    <% end %>
  </div>


  <div class="navbar_emoji">
  <% @categories.each do |category| %>
   <%= category_link(category, params[:category_ids]) %>
  <% end %>
</div>


  <div data-controller="places">
    <div data-places-target="list">
    </div>
  </div>

  <%= link_to "Voir mon parcours", journey_path(@journey), class: "button salmon-button journey-button" %>
  <script src = "index.js"></script>
</div>
