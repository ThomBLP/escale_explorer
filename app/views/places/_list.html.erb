<% @places.each do |place| %>
  <div class="card_place">
    <%= link_to journey_place_path(@journey, place, category_ids: params[:category_ids]), class: "card_place" do %>
    <% if place.illustration.present? %>
      <%= image_tag place.illustration, class: 'image_places' %>
    <% end %>
    <% end %>
    <div>
      <h3 class='title_principal_list'><%= place.name %> - <%= place.category.name %> </h3>
        <div class="d-flex">
        <% if place.reviews.any? %>
          <% Review::AUTHORIZED_RATINGS.each do |number| %>
            <i class="fa<%= (number > place.reviews.sum(:rating) / place.reviews.count) ? 'r' : 's' %> fa-star"></i>
          <% end %>
        <% end %>
      </div>
    </div>
    <div class="emoji_card">

      <% travel_time = place.travel_time(@journey) %>
      <p class="description"><span class="emoji">🕐</span><%= place.visit_duration %>min</p>
      <p class="description"><span class="emoji"><%= @journey.travel_emoji %></span><%= travel_time %>min</p>

      <% if rest_time < (place.visit_duration + travel_time) %>
        <p>🚨 Temps dépassé</p>
      <% end %>
    </div>

    <%= button_to "Ajouter", journey_visits_path(@journey, place_id: place, category_ids: params[:category_ids], weather_icon: params[:weather_icon]), class: "button salmon-button mt-3" %>

<% end %>
